# توثيق واجهة برمجة التطبيقات (API)

## نقاط النهاية المتاحة

### نظرة عامة
- **المسار**: `/admin-api/stats`
- **الطريقة**: `GET`
- **الوصف**: يجلب إحصائيات عامة عن النظام
- **الاستجابة**:
```json
{
  "totalUsers": 1250,
  "activeUsers": 856,
  "totalRevenue": 15600,
  "newSubscriptions": 28
}
```

### المتدربين
- **المسار**: `/admin-api/trainees`
- **الطرق المتاحة**: 
  - `GET`: جلب قائمة المتدربين
  - `POST`: إضافة متدرب جديد
  - `PUT`: تحديث بيانات متدرب
  - `DELETE`: حذف متدرب
- **نموذج البيانات**:
```json
{
  "name": "محمد خلف",
  "email": "mk@powerhouse.com",
  "phone": "970 59 123 4567",
  "plan": "premium",
  "goals": ["weight_loss", "muscle_gain"],
  "height": 175,
  "weight": 80,
  "targetWeight": 75
}
```

### التمارين
- **المسار**: `/admin-api/exercises`
- **الطرق المتاحة**: 
  - `GET`: جلب قائمة التمارين
  - `POST`: إضافة تمرين جديد
  - `PUT`: تحديث بيانات تمرين
  - `DELETE`: حذف تمرين
- **نموذج البيانات**:
```json
{
  "name": "بنش بريس",
  "category": "chest",
  "sets": 4,
  "reps": 12,
  "description": "تمرين لتقوية عضلات الصدر",
  "videoUrl": "https://example.com/video.mp4"
}
```

### الوجبات
- **المسار**: `/admin-api/meals`
- **الطرق المتاحة**: 
  - `GET`: جلب قائمة الوجبات
  - `POST`: إضافة وجبة جديدة
  - `PUT`: تحديث بيانات وجبة
  - `DELETE`: حذف وجبة
- **نموذج البيانات**:
```json
{
  "name": "شوفان بالموز",
  "calories": 350,
  "protein": 12,
  "carbs": 45,
  "fat": 8,
  "description": "وجبة فطور صحية"
}
```

### المحادثات
- **المسار**: `/admin-api/chat`
- **الطرق المتاحة**: 
  - `GET`: جلب سجل المحادثات
  - `POST`: إرسال رسالة جديدة
- **نموذج البيانات**:
```json
{
  "traineeId": "123",
  "message": "مرحباً، كيف حالك؟",
  "timestamp": "2024-03-24T12:00:00Z"
}
```

### الإشعارات
- **المسار**: `/admin-api/notifications`
- **الطرق المتاحة**: 
  - `GET`: جلب قائمة الإشعارات
  - `POST`: إرسال إشعار جديد
  - `PUT`: تحديث حالة إشعار
  - `DELETE`: حذف إشعار
- **نموذج البيانات**:
```json
{
  "title": "تحديث البرنامج التدريبي",
  "message": "تم تحديث برنامجك التدريبي لهذا الأسبوع",
  "type": "info",
  "recipientId": "123"
}
```

### العضويات
- **المسار**: `/admin-api/memberships`
- **الطرق المتاحة**: 
  - `GET`: جلب قائمة العضويات
  - `POST`: إضافة عضوية جديدة
  - `PUT`: تحديث بيانات عضوية
  - `DELETE`: حذف عضوية
- **نموذج البيانات**:
```json
{
  "name": "الخطة المتقدمة",
  "price": 199,
  "duration": "3 شهور",
  "features": [
    "برنامج تدريبي متقدم",
    "برنامج غذائي مخصص",
    "متابعة يومية",
    "جلسات خاصة"
  ]
}
```

### إعدادات التطبيق

#### الإعدادات العامة
- **المسار**: `/admin-api/settings/general`
- **الطرق المتاحة**: 
  - `GET`: جلب الإعدادات العامة
  - `PUT`: تحديث الإعدادات العامة
- **نموذج البيانات**:
```json
{
  "appName": "MK",
  "appDescription": "منصة تدريب رياضي متكاملة",
  "contactEmail": "contact@powerhouse.com",
  "contactPhone": "+970 59 123 4567"
}
```

#### إعدادات الأمان
- **المسار**: `/admin-api/settings/security`
- **الطرق المتاحة**: 
  - `GET`: جلب إعدادات الأمان
  - `PUT`: تحديث إعدادات الأمان
- **نموذج البيانات**:
```json
{
  "twoFactorAuth": false,
  "emailVerification": true
}
```

#### إعدادات الإشعارات
- **المسار**: `/admin-api/settings/notifications`
- **الطرق المتاحة**: 
  - `GET`: جلب إعدادات الإشعارات
  - `PUT`: تحديث إعدادات الإشعارات
- **نموذج البيانات**:
```json
{
  "emailNotifications": true,
  "appNotifications": true
}
```

#### إعدادات المظهر
- **المسار**: `/admin-api/settings/appearance`
- **الطرق المتاحة**: 
  - `GET`: جلب إعدادات المظهر
  - `PUT`: تحديث إعدادات المظهر
- **نموذج البيانات**:
```json
{
  "theme": "dark",
  "primaryColor": "#0AE7F2"
}
```

## المصادقة

جميع نقاط النهاية تتطلب مصادقة باستخدام رمز الوصول (Bearer Token). يجب إرسال الرمز في ترويسة الطلب:

```
Authorization: Bearer <token>
```

## الأخطاء

في حالة حدوث خطأ، سيتم إرجاع استجابة تحتوي على:

```json
{
  "error": "وصف الخطأ"
}
```

مع رمز الحالة المناسب:
- `400`: خطأ في الطلب
- `401`: غير مصرح
- `404`: لم يتم العثور على المورد
- `500`: خطأ في الخادم